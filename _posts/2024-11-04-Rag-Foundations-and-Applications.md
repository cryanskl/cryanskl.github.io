---
title: "Rag Foundations and Applications"
date: 2024-11-04 14:50:28 +0800
categories: [LLM]
tags: [llm, rag]
pin: false
---

## 1. åº”ç”¨å¼€å‘

åœ¨ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹è¿›è¡Œåº”ç”¨å¼€å‘æ—¶ï¼Œæ¨¡å‹å¶å°”ä¼šç”Ÿæˆé”™è¯¯çš„å›ç­”ï¼ˆå³äº§ç”Ÿâ€œå¹»è§‰â€ï¼‰ã€‚

å¸¸è§çš„è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼š

1. **Prompt ç¼–å†™ä¸å½“**ï¼šè®¾è®¡æ›´å…·å¼•å¯¼æ€§å’Œæ˜ç¡®æ€§çš„æç¤ºè¯å¯ä»¥æœ‰æ•ˆå‡å°‘æ¨¡å‹è¯¯åˆ¤ã€‚
2. **ç¼ºä¹èƒŒæ™¯çŸ¥è¯†**ï¼šæ¨¡å‹å¹¶éå®æ—¶è”ç½‘ï¼Œç¼ºä¹æœ€æ–°æˆ–é¢†åŸŸç‰¹å®šçš„ä¿¡æ¯ï¼Œæ­¤æ—¶å¯é‡‡ç”¨ RAGï¼ˆRetrieval-Augmented Generationï¼‰æ–¹æ³•è¡¥å……å¤–éƒ¨çŸ¥è¯†ã€‚
3. **æ¨¡å‹èƒ½åŠ›ä¸è¶³**ï¼šé’ˆå¯¹ç‰¹å®šä»»åŠ¡ï¼Œé¢„è®­ç»ƒæ¨¡å‹å¯èƒ½æ— æ³•èƒœä»»ï¼Œæ­¤æ—¶å¯é€šè¿‡å¾®è°ƒå¢å¼ºå…¶èƒ½åŠ›ã€‚

------

## 2. RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰

### å®šä¹‰

RAGï¼ˆRetrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ˜¯ä¸€ç§ç»“åˆäº†ä¿¡æ¯æ£€ç´¢ä¸æ–‡æœ¬ç”Ÿæˆçš„æŠ€æœ¯æ¡†æ¶ã€‚å®ƒé€šè¿‡å®æ—¶æ£€ç´¢ä¸ç”¨æˆ·æŸ¥è¯¢ç›¸å…³çš„å¤–éƒ¨çŸ¥è¯†æ–‡æ¡£ï¼Œå¹¶å°†æ£€ç´¢ç»“æœä½œä¸ºä¸Šä¸‹æ–‡è¾“å…¥ç»™ç”Ÿæˆæ¨¡å‹ï¼Œä»¥æå‡ç”Ÿæˆå†…å®¹çš„å‡†ç¡®æ€§ã€æ—¶æ•ˆæ€§ä¸å¯è§£é‡Šæ€§ã€‚

ç®€è€Œè¨€ä¹‹ï¼ŒRAG å°±åƒæ˜¯åœ¨é—®ç­”è¿‡ç¨‹ä¸­â€œå®æ—¶è”ç½‘â€ï¼Œä¸ºç”Ÿæˆæä¾›å‚è€ƒä¾æ®ã€‚

### ä¼˜åŠ¿

- **æå‡æ—¶æ•ˆæ€§**ï¼šæ¨¡å‹å¯æ¥å…¥æœ€æ–°çš„ä¿¡æ¯æºï¼Œé¿å…çŸ¥è¯†é™ˆæ—§ã€‚
- **å‡å°‘å¹»è§‰**ï¼šæä¾›äº‹å®æ”¯æŒï¼Œå‡å°‘æ¨¡å‹â€œç¼–é€ â€ä¿¡æ¯çš„é£é™©ã€‚
- **æå‡ä¸“ä¸šæ€§**ï¼šåœ¨å‚ç›´é¢†åŸŸè¡¨ç°æ›´ä¼˜ï¼Œç‰¹åˆ«é€‚ç”¨äºæ³•å¾‹ã€åŒ»å­¦ã€é‡‘èç­‰ä¸“ä¸šçŸ¥è¯†å¯†é›†å‹ä»»åŠ¡ã€‚
- **æ”¯æŒæº¯æºä¸å¯è§£é‡Šæ€§**ï¼šæ¯ä¸ªå›ç­”å‡å¯è¿½æº¯å…¶ä¾æ®ï¼Œæœ‰åŠ©äºå»ºç«‹ä¿¡ä»»ã€‚

### RAG æµç¨‹æ¦‚è§ˆ

#### æ£€ç´¢ä¸ç”Ÿæˆæµç¨‹

1. **Query å‘é‡åŒ–**ï¼šå°†ç”¨æˆ·æŸ¥è¯¢è½¬åŒ–ä¸ºæ–‡æœ¬å‘é‡ã€‚
2. **åˆæ­¥æ£€ç´¢**ï¼šåœ¨å‘é‡æ•°æ®åº“ä¸­æŸ¥æ‰¾ç›¸ä¼¼çš„æ–‡æœ¬ç‰‡æ®µã€‚
3. **é‡æ’åºï¼ˆRe-rankï¼‰**ï¼šä½¿ç”¨æ›´å¤æ‚çš„ç›¸å…³æ€§æ¨¡å‹å¯¹æ£€ç´¢ç»“æœè¿›è¡Œæ’åºï¼Œé€šå¸¸å–å‰ Top-kï¼ˆå¦‚ 10 ä¸ªï¼‰ã€‚
4. **ç­›é€‰æ–‡æ¡£**ï¼šæ ¹æ®å¾—åˆ†ä¿ç•™è´¨é‡é«˜çš„æ–‡æ¡£ç‰‡æ®µã€‚
5. **ç”Ÿæˆå›ç­”**ï¼šå°†ç­›é€‰ç»“æœä½œä¸ºä¸Šä¸‹æ–‡ä¼ å…¥ç”Ÿæˆæ¨¡å‹ï¼Œç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚

#### æ„å»ºç´¢å¼•é˜¶æ®µï¼ˆæ•°æ®å‡†å¤‡ï¼‰

æ­¤é˜¶æ®µé€šå¸¸åœ¨ç³»ç»Ÿåˆå§‹åŒ–æ—¶å®Œæˆï¼Œå¯å®šæœŸå¢é‡æ›´æ–°ã€‚

- **æ•°æ®å‡†å¤‡**ï¼šæ”¶é›†ã€æ¸…æ´—å¹¶æ•´ç†å¤–éƒ¨çŸ¥è¯†æ•°æ®ã€‚
- **æ–‡æœ¬åˆ‡åˆ†**ï¼šå°†é•¿æ–‡æ¡£åˆ‡åˆ†ä¸ºè¯­ä¹‰è¿è´¯çš„â€œchunkâ€ï¼ˆç‰‡æ®µï¼‰ï¼Œå¹³è¡¡ä¿¡æ¯å®Œæ•´æ€§ä¸æ£€ç´¢ç²’åº¦ã€‚
- **å‘é‡åŒ–**ï¼šä½¿ç”¨åµŒå…¥æ¨¡å‹ï¼ˆå¦‚ BGEã€text-embedding-3 ç­‰ï¼‰å°†æ¯ä¸ªç‰‡æ®µè½¬ä¸ºå‘é‡ï¼Œå­˜å…¥å‘é‡æ•°æ®åº“ï¼ˆå¦‚ FAISSã€Milvusï¼‰ã€‚

#### æ£€ç´¢é˜¶æ®µ

- **æŸ¥è¯¢å¤„ç†**ï¼šå°†ç”¨æˆ·é—®é¢˜å‘é‡åŒ–ï¼Œå¹¶åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œç›¸ä¼¼åº¦æ£€ç´¢ã€‚
- **é‡æ’åº**ï¼šåˆ©ç”¨åŸºäºäº¤å‰ç¼–ç å™¨çš„æ’åºæ¨¡å‹ï¼Œæå‡ç»“æœç›¸å…³æ€§å’Œç²¾å‡†åº¦ã€‚

#### ç”Ÿæˆé˜¶æ®µ

- **ä¸Šä¸‹æ–‡æ‹¼æ¥**ï¼šå°†æ£€ç´¢åˆ°çš„ç‰‡æ®µä¸åŸå§‹é—®é¢˜ç»„ç»‡æˆå®Œæ•´çš„ä¸Šä¸‹æ–‡ï¼ˆå³æ–°çš„ Promptï¼‰ã€‚
- **æ–‡æœ¬ç”Ÿæˆ**ï¼šç”±å¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆå›ç­”ï¼Œè¾“å‡ºç»™ç”¨æˆ·ã€‚

> ğŸ“Œ æ³¨æ„ï¼šRAG å®é™…ä¸Šé‡æ„äº†ä¸€ä¸ªæ›´å…·ä¸Šä¸‹æ–‡æ”¯æŒçš„ Promptï¼Œé€šè¿‡æ£€ç´¢å¢å¼ºæ¨¡å‹çš„æ¨ç†åŸºç¡€ã€‚

![image-20250601154203058](https://zr-picture.oss-cn-shanghai.aliyuncs.com/image-20250601154203058.png)

## 3.NativeRAG

å®¢æˆ·çš„queryä¼šä»indexing(å‘é‡æ•°æ®åº“)è¿›è¡Œæ£€ç´¢, æ£€ç´¢çš„æ–‡æ¡£ä¼šåŠ ä¸Šä¸Šä¸‹æ–‡ä¸­. llmä¼šåŸºäºæ–°ä¸Šä¸‹æ–‡è¿›è¡Œç”Ÿæˆ

![image-20250601154802180](https://zr-picture.oss-cn-shanghai.aliyuncs.com/image-20250601154802180.png)

## 4.æ­å»ºRAG

é›¶ä»£ç : Dify, Coze

éƒ¨ç½²: LangChain, LlamaIndex

